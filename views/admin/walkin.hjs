<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Chirpee.io - Walkin Registration Desk</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Core CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/main.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato:400,900,300,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,400italic,700italic" rel="stylesheet">
    <!-- Icons/Glyphs -->
    <link href="/assets/fonts/fontello.css" rel="stylesheet">
    <!--Jquery validator-->
    <link href="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/theme-default.min.css" rel="stylesheet" type="text/css" />
    <style>
        .multistep .multistep-step {
            padding: 0;
            position: relative;
            margin-bottom: 10px;
        }
        
        .multistep .multistep-step .multistep-stepname {
            margin-bottom: 16px;
            color: #fff;
            font-size: 1.6rem;
            white-space: nowrap;
        }
        
        .multistep .multistep-step .multistep-dot {
            position: absolute;
            right: 50%;
            left: 50%;
            width: 32px;
            height: 32px;
            display: block;
            margin-top: -16px;
            margin-left: -15.5px;
            border-radius: 50%;
            background: #f5f5f5;
            /* Inner Dot */
        }
        
        .multistep .multistep-step .multistep-dot:after {
            content: ' ';
            border-radius: 50px;
            position: absolute;
            top: 8px;
            bottom: 8px;
            left: 8px;
            right: 8px;
            background: #e0e0e0;
        }
        
        .multistep .multistep-step .progress {
            position: absolute;
            width: 100%;
            height: 10.56px;
            margin-top: -5.28px;
            box-shadow: none;
            border-radius: 0;
        }
        
        .multistep .multistep-step .progress .progress-bar {
            width: 0px;
            box-shadow: none;
            background: #005982;
        }
        
        .multistep .multistep-step:first-child>.progress {
            left: 50%;
            width: 50%;
        }
        
        .multistep .multistep-step:last-child>.progress {
            width: 50%;
        }
        
        .multistep .multistep-step.complete .multistep-dot {
            background: #005982;
        }
        
        .multistep .multistep-step.complete .multistep-dot:after {
            background: #005982;
        }
        
        .multistep .multistep-step.complete .progress>.progress-bar {
            width: 100%;
        }
        
        .multistep .multistep-step.next:hover .multistep-dot {
            background: #fff;
        }
        
        .multistep .multistep-step.next:hover .multistep-dot:after {
            background: #e0e0e0;
        }
        
        .multistep .multistep-step.current .multistep-dot {
            background: #fff;
        }
        
        .multistep .multistep-step.current .multistep-dot:after {
            background: #005982;
        }
        
        .multistep .multistep-step.current .progress>.progress-bar {
            width: 50%;
        }
        
        .multistep .multistep-step.current:first-child>.progress>.progress-bar {
            width: 0%;
        }
        
        .multistep .multistep-step.current:last-child>.progress>.progress-bar {
            width: 100%;
        }
        
        .multistep .multistep-step a.multistep-dot {
            pointer-events: none;
        }
        
        .multistep .multistep-step.next a.multistep-dot {
            pointer-events: all;
        }
        
        html,
        body {
            height: 100%;
            width: 100%;
        }
        
        .walkin-bg {
            height: 100%;
            background-image: url(/assets/images/art/walkin-bg.jpg);
            background-position: center center;
            background-size: cover;
        }
        
        .brand-logo {
            width: 200px;
        }
        
        .center-div {
            position: absolute;
            margin: auto;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            width: 1000px;
            height: 600px;
            background-color: white;
            border-radius: 20px;
            -webkit-box-shadow: 9px 9px 20px -2px rgba(0, 0, 0, 0.75);
            -moz-box-shadow: 9px 9px 20px -2px rgba(0, 0, 0, 0.75);
            box-shadow: 9px 9px 20px -2px rgba(0, 0, 0, 0.75);
        }
    </style>


    <body>

        <div class="container-fluid walkin-bg inner-top-xs">

            <!-- Branding and progress bar  -->
            <div class="row inner-bottom-xs">
                <div class="col-lg-2 col-lg-offset-3 ">
                    <img src="/assets/images/showcase.svg" class="img-responsive brand-logo inner-bottom-xxs" alt="Image">
                </div>
                <div class="col-lg-6">
                    <div class="divide10"></div>
                    <p style="color:#005982;font-size:300%;font-weight:600">Walk-in registration kiosk</p>
                </div>
            </div>

            <div class="row multistep">
                <div class="col-xs-3 multistep-step complete">
                    <div class="text-center multistep-stepname">Step 1<br><strong>Search records</strong></div>
                    <div class="divide10"></div>
                    <div class="progress">
                        <div class="progress-bar"></div>
                    </div>
                    <a href="#" class="multistep-dot"></a>
                </div>

                <div class="col-xs-3 multistep-step current">
                    <div class="text-center multistep-stepname">Step 2<br><strong>New registrations</strong></div>
                    <div class="divide10"></div>
                    <div class="progress">
                        <div class="progress-bar"></div>
                    </div>
                    <a href="#" class="multistep-dot"></a>
                </div>

                <div class="col-xs-3 multistep-step next">
                    <div class="text-center multistep-stepname">Step 3<br><strong>Print badge</strong></div>
                    <div class="divide10"></div>
                    <div class="progress">
                        <div class="progress-bar"></div>
                    </div>
                    <a href="#" class="multistep-dot"></a>
                </div>

                <div class="col-xs-3 multistep-step disabled">
                    <div class="text-center multistep-stepname">Step4<br><strong>Badge printed</strong></div>
                    <div class="divide10"></div>
                    <div class="progress">
                        <div class="progress-bar"></div>
                    </div>
                    <a href="#" class="multistep-dot"></a>
                </div>
            </div>

            <div class="row">

                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 center-div">

                </div>

            </div>





<<<<<<< HEAD
=======
        <!-- Steps  -->

        <p></p>
        <div class="row">
            <div class="col-xs-12">
                <div class="tabs tabs-services tabs-circle-top tab-container">

                    <ul class="etabs text-center">
                        <li class="tab">
                            <a href="#tab-1" class="nav-button">
                                <div><i class="fa fa-search" aria-hidden="true"></i></div>Step 1</a>
                        </li>
                        <li class="tab">
                            <a href="#tab-2" class="nav-button">
                                <div><i class="fa fa-id-card" aria-hidden="true"></i></div>Step 2</a>
                        </li>
                        <li class="tab">
                            <a href="#tab-3" class="nav-button">
                                <div><i class="fa fa-print" aria-hidden="true"></i></div>Step 3</a>
                        </li>
                    </ul>

                    <!-- Content for each of the tabs  -->
                    <div class="panel-container">

                        <!-- Step 1 Content   -->
                        <div class="tab-content" id="tab-1">
                            <div class="row">
                                <div class="col-md-3">
                                    <form id="search" class="navbar-form search" role="search">
                                        <input id="txtSearch" type="search" class="form-control" placeholder="Type to search">
                                        <button id="btnSearch" type="submit" class="btn btn-default btn-submit icon-right-open"></button>
                                    </form>
                                </div>
                                <div class="col-md-9">

                                    <table id="tableResult" class="table table-bordred table-striped" hidden>
                                        <thead>
                                            <tr>
                                                <th>Name <i class="ionicons ion-android-walk"></i></th>
                                                <th>Company</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tableResultContent">
                                        </tbody>
                                    </table>

                                </div>
                                <hr style="border: 0.5px dashed #d8d8d8;">
                                <div class="row text-center">
                                    <button type="button" class="btn btn-primary">Next step <i class="fa fa-arrow-right" aria-hidden="true"></i></button>
                                </div>



                            </div>
                        </div>

                        <!-- Step 2 Content  -->
                        <div class="tab-content" id="tab-2">
                            <div class="row">

                                <div id="printDiv" class="container col-lg-12 card border">

                                    <!-- This is the background image, cannot use CSS background for printing, need to use absolute image -->
                                    <img id="imgBadge" style="position: absolute; z-index:-1; height: 100%; width: 100%" src="">

                                    <div class="spacer-10"></div>
                                    <div class="spacer-10"></div>
                                    <div class="spacer-5"></div> 

                                    <div class="row">
                                        <div class="col-sm-12 indent">
                                            <strong id="delegateName"></strong>
                                        </div>
                                    </div>

                                    <div class="spacer-2 no-print"></div>

                                    <div class="row">
                                        <div class="col-sm-12 indent">
                                            <span id="delegateCompany"></span>
                                        </div>
                                        <div class="col-md-1"></div>  
                                    </div>

                                    <div class="spacer-10"></div> 

                                    <div class="row">
                                        <div class="col-md-4 indent">
                                            <div class="divQr" id="idQr"></div>
                                        </div>
                                    </div>

                                </div>


                            </div>
                            <hr style="border: 0.5px dashed #d8d8d8;">
                            <div class="row text-center">
                                <button id="btnBack" type="button" class="btn btn-primary"><i class="fa fa-arrow-left" aria-hidden="true"></i> Step back</button>
                                <button id="btnPrint" type="button" class="btn btn-primary">Print  <i class="fa fa-print" aria-hidden="true"></i></i></button>
                            </div>


                        </div>

                        <!-- SAtep 3 Content  -->
                        <div class="tab-content" id="tab-3">
                            <div class="row">



                            </div>
                            <hr style="border: 0.5px dashed #d8d8d8;">
                            <div class="row text-center">
                                <button id="btnReprint" type="button" class="btn btn-primary"><i class="fa fa-print" aria-hidden="true"></i> Re-Print</button>
                                <button id="btnDone" type="button" class="btn btn-primary">Done <i class="fa fa-thumbs-o-up" aria-hidden="true"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
>>>>>>> b78560627f3a95adec49f09fa4a57d0c7d9e572d
        </div>
    </body>

</html>

<!-- JS included in this page  -->
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>




<!-- Ryno Backend Code  -->
<script>
    var $btnSearch = $("#btnSearch");
    var $txtSearch = $("#txtSearch");
    var $tableResult = $("#tableResult");
    var $tableResultContent = $("#tableResultContent");
    var $delegateName = $("#delegateName");
    var $delegateCompany = $("#delegateCompany");
    var $imgBadge = $("#imgBadge");
    var $btnPrint = $("#btnPrint");
    var $btnReprint = $("#btnReprint");
    var $btnDone = $("#btnDone");
    var $btnBack = $("#btnBack");

    function printDiv(elem) {

        var mywindow = window.open('', 'PRINT', 'height=1,width=1,top=200,left=500');

        mywindow.document.write('<html><head><title>' + document.title + '</title>');
        mywindow.document.write('<link rel="stylesheet" href="/assets/css/bootstrap.min.css">');
        mywindow.document.write('<link rel="stylesheet" href="/assets/css/rotating-card.css">');
        mywindow.document.write('<link rel="stylesheet" href="/assets/css/print.css">');
        mywindow.document.write('</head><body >');
        mywindow.document.write(document.getElementById(elem).innerHTML);
        mywindow.document.write('</body></html>');
        mywindow.document.write("<script>");
        mywindow.document.write("window.print()\n");
        // mywindow.document.write("setTimeout(function () {\n");
        // mywindow.document.write("window.close\n");
        // mywindow.document.write("}, 100);\n");
        mywindow.document.write("<\/script>");

        // mywindow.document.close(); // necessary for IE >= 10
        // mywindow.focus(); // necessary for IE >= 10*/

        setTimeout(function() {
            mywindow.close();
        }, 500);

        loadTabConfirm();

        return true;

    }

    function loadTabBadge(userId) {

        $('.etabs a[href="#tab-2"]').trigger('click');
        $('.etabs a[href="#tab-2"]').trigger('touchstart');

        $("#idQr").empty();

        if (userId) {

            $.ajax({

                type: "GET",
                url: "/api/user/" + userId,
                success: function(user) {
                    $delegateName.text(user.first_name + " " + user.last_name);
                    $delegateCompany.text(user.company);
                    $imgBadge.attr("src", "/assets/images/badge/badge-" + user.event_profile + ".svg")

                    var qrCodeSvg = new Qrcodesvg(user.email, "idQr", 90);

                    qrCodeSvg.draw();
                }
            })

        }

    }

    function loadTabConfirm() {

        $('.etabs a[href="#tab-3"]').trigger('click');
        $('.etabs a[href="#tab-3"]').trigger('touchstart');

    }

    function loadTabSearch() {

        $('.etabs a[href="#tab-1"]').trigger('click');
        $('.etabs a[href="#tab-1"]').trigger('touchstart');

    }
</script>

<script>
    $(document).ready(function() {

        $btnSearch.click(function(e) {
                e.preventDefault()

                $.ajax({

                    type: "GET",
                    url: "/api/userFirstName/" + $txtSearch.val(),
                    success: function(userResult) {

<<<<<<< HEAD
                        $tableResult.empty();
                        $tableResult.show();

                        userResult.forEach(function(element) {
                            $tableResult.append("<tr id='" + element.id + "' class='delegate-rows'><td>" + element.first_name + " " + element.last_name + "</td> \
=======
                    $tableResultContent.empty();
                    $tableResult.show();

                    userResult.forEach(function(element) {
                        $tableResultContent.append("<tr id='" + element.id + "' class='delegate-rows'><td>" + element.first_name + " " + element.last_name + "</td> \
>>>>>>> b78560627f3a95adec49f09fa4a57d0c7d9e572d
                        <td>" + element.company + "</td></tr>")
                        }, this);

                    }
                })
            }) //btnSearch.click

        $tableResult.on("click", ".delegate-rows", function() {
            loadTabBadge(this.id);
        })

        $btnPrint.click(function() {
            printDiv("printDiv");
        })

        $btnReprint.click(function() {
            loadTabBadge();
        })

        $btnBack.click(function() {
            loadTabSearch();
        })

        $btnDone.click(function() {
            location.reload();
        })

    })
</script>